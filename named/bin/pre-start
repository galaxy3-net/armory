#!/usr/bin/env bash
var1=${@}

__RESOLVE_FILE__=/etc/resolv.conf

function update_domain
{
  echo "domain ${1}" >> ${__RESOLVE_FILE__}
}

function update_searchlist
{
  echo "Adding search list"
  echo "search ${1}" >> ${__RESOLVE_FILE__}
}

cat <<__EOD__

  Processing Domains

  ${var1[@]}

__EOD__


for item in ${var1[@]}
do
  echo "Checking ${item}"
  egrep "domain ${item}" ${__RESOLVE_FILE__} ||  update_domain "${item}"
done

egrep "search ${var1[@]}" ${__RESOLVE_FILE__} || update_searchlist ${var1[@]}

printf "\n\n${__RESOLVE_FILE__}\n"
cat ${__RESOLVE_FILE__}

cat <<__EOD__

Finished

__EOD__


